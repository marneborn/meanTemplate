!function(){"use strict";window.createApp=function(appName,dependencies){function registerModule(moduleName,dependencies){var module;dependencies||(dependencies=[]);try{module=angular.module(moduleName);for(var hasDeps=angular.module(moduleName).requires,i=0;i<dependencies.length;i++)hasDeps.indexOf(dependencies[i])>=0||hasDeps.push(dependencies[i])}catch(err){module=angular.module(moduleName,dependencies),app.requires.push(moduleName)}return module}var app=angular.module(appName,dependencies||[]);return window.registerModule=registerModule,app}}(),function(){"use strict";window.createApp("testapp2",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch"])}(),function(){"use strict";function UserProvider(){function initUser(){thisUser={_id:null,email:"",displayname:"",roles:[],isLoggedIn:!1}}function mergeUser(newInfo){angular.extend(thisUser,newInfo)}function isLoggedIn(){return thisUser.isLoggedIn}function getValue(key){return thisUser[key]}var thisUser={};return initUser(),{init:function(user){user&&(mergeUser(user),thisUser.isLoggedIn=!0)},$get:function($http,$q){function signup(info){return initUser(),$http.post("/user/signup",info,{cache:!1,headers:{accept:"application/json"}}).success(function(data){mergeUser(data),thisUser.isLoggedIn=!0}).error(function(data,status){console.error("error - "+status+" - "+angular.toJson(data))})}function signin(username,password){return initUser(),$http.post("/user/signin",{username:username,password:password},{cache:!1,headers:{accept:"application/json"}}).success(function(data){mergeUser(data),thisUser.isLoggedIn=!0}).error(function(data,status){console.error("Error logging in"),console.error("status> "+JSON.stringify(status)),console.error("data> "+JSON.stringify(data))})["catch"](function(response){return response.data?$q.reject(response.data.message):response})}function signout(){return initUser(),$http.get("/user/signout",{cache:!1,headers:{accept:"application/json"}}).success(function(){}).error(function(data,status){console.error("error - "+status+" - "+angular.toJson(data))})}function update(info){return $http.post("/user/update",info,{cache:!1,headers:{accept:"application/json"}}).success(function(data){initUser(),mergeUser(data)}).error(function(data,status){console.error("error - "+status+" - "+angular.toJson(data))})["catch"](function(err){return $q.reject(err.data)})}return{isLoggedIn:isLoggedIn,signup:signup,signin:signin,signout:signout,update:update,get:getValue}}}}var moduleName="commonUser";window.registerModule(moduleName).provider("user",UserProvider)}(),function(){"use strict";function MngCoverup($q,$window,makeStyleSheet){function link(scope,element){setDefaults(scope);for(var container,content,background,parent=element.parent(),divs=element.find("div"),i=0;i<divs.length;i++){var el=divs[i];content||"mng-coverup-content"!==el.getAttribute("class")||(content=angular.element(el)),container||"mng-coverup-container"!==el.getAttribute("class")||(container=angular.element(el)),background||"mng-coverup-background"!==el.getAttribute("class")||(background=angular.element(el))}if(shapeBackground(parent,background),isPositioned(parent)||(placeContainer(container,getElementRect(parent)),waitForChildImages(scope,parent).then(function(){placeContainer(container,getElementRect(parent))}),scope.$watch(function(){return getElementRect(parent)},function(newSize){placeContainer(container,newSize)},!0)),scope.centeredVertical||scope.centeredHorizontal)scope.$watch(function(){return{container:getElementRect(container),content:getElementRect(content)}},function(newObj){placeContent(scope,content,newObj.container,newObj.content)},!0);else{var containerRect=getElementRect(container),contentRect=getElementRect(content);placeContent(scope,content,containerRect,contentRect)}}function setDefaults(scope){void 0===scope.centeredHorizontal&&void 0===scope.centeredVertical?void 0===scope.centered||scope.centered?(scope.centeredHorizontal=!0,scope.centeredVertical=!0):(scope.centeredHorizontal=!1,scope.centeredVertical=!1):void 0===scope.centeredHorizontal?scope.centeredHorizontal=!scope.centeredVertical:void 0===scope.centeredVertical&&(scope.centeredVertical=!scope.centeredHorizontal)}function isPositioned(el){return"static"!==el.css("position")}function placeContainer(container,parentRect){container.css("left",parentRect.left+"px"),container.css("top",parentRect.top+"px"),container.css("height",parentRect.height+"px"),container.css("width",parentRect.width+"px")}function placeContent(scope,content,containerRect,contentRect){scope.centeredHorizontal&&(contentRect.width<containerRect.width?(content.css("left","50%"),content.css("marginLeft",-1*contentRect.width/2+"px")):(content.css("left","0px"),content.css("marginLeft","0px"))),scope.centeredVertical&&(contentRect.height<containerRect.height?(content.css("top","50%"),content.css("marginTop",-1*contentRect.height/2+"px")):(content.css("top","0px"),content.css("marginTop","0px")))}function waitForChildImages(scope,element){return $q.all(element.find("img").map(function(idx,img){var defer=$q.defer(),resolveIt=function(){defer.resolve()};return angular.element(img).bind("load",resolveIt).bind("error",resolveIt).bind("abort",resolveIt),scope.$on("$destroy",function(){element.unbind("load"),element.unbind("error"),element.unbind("abort")}),defer.promise}))}function getElementRect(el){var rect=el[0].getBoundingClientRect();return{top:rect.top+$window.scrollY,left:rect.left+$window.scrollX,height:rect.height,width:rect.width}}function shapeBackground(parent,background){for(var attrs=["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius"],i=0;i<attrs.length;i++)background.css(attrs[i],parent.css(attrs[i]))}function getCss(){return[{_selector:".mng-coverup-container",position:"absolute",top:"0px",left:"0px",height:"100%",width:"100%","z-index":zIndex,display:"block; "},{_selector:".mng-coverup-background",position:"absolute",top:"0px",left:"0px","z-index":zIndex,height:"100%",width:"100%","background-color":"#808080",opacity:"0.7"},{_selector:".mng-coverup-content",position:"absolute","z-index":zIndex}]}return makeStyleSheet(moduleName,getCss()),{restrict:"EA",scope:{centered:"=?",centeredHorizontal:"=?",centeredVertical:"=?"},transclude:!0,template:'<div class="mng-coverup-container"><div class="mng-coverup-background"></div><div data-ng-transclude class="mng-coverup-content"></div></div>',link:link}}var moduleName="mngCoverup",zIndex=1e3;window.registerModule(moduleName).directive(moduleName,MngCoverup),MngCoverup.$inject=["$q","$window","makeStyleSheet"]}(),function(){"use strict";angular.module("testapp2").config(["$routeProvider",function($routeProvider){$routeProvider.when("/",{templateUrl:"main/main.view.html",controller:"mainController",controllerAs:"main"}).otherwise({redirectTo:"/"})}])}(),function(){"use strict";var moduleName="commonUser";window.registerModule(moduleName).config(function($routeProvider){$routeProvider.when("/user/profile",{templateUrl:"/components/user/profile/profile.view.html",controller:"profileController",controllerAs:"profile"}).when("/user/signin",{templateUrl:"/components/user/signin/signin.view.html",controller:"signinController",controllerAs:"signin"}).when("/user/signup",{templateUrl:"/components/user/signup/signup.view.html",controller:"signupController",controllerAs:"signup"})})}(),function(){"use strict";function HeaderController($location,user){function logout(){return user.signout()["catch"](function(err){console.error(err)})}function isActive(viewLocation){return viewLocation===$location.path()}var vm=this;vm.isLoggedIn=user.isLoggedIn,vm.userName=user.get("username"),vm.isActive=isActive,vm.doLogout=logout}angular.module("testapp2").controller("headerController",HeaderController),HeaderController.$inject=["$location","user"]}(),function(){"use strict";function MainController($timeout){var vm=this;vm.coverup=!0,$timeout(function(){vm.coverup=!1},2e3),vm.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}angular.module("testapp2").controller("mainController",MainController),MainController.$inject=["$timeout"]}(),function(){"use strict";function ProfileController($location,$scope,$timeout,user){function reset(){vm.email=user.get("email"),vm.displayname=user.get("displayname");for(var providers=user.get("providers"),i=0;i<providers.length;i++)"local"===providers[i].source?(vm.hasLocal=!0,vm.username=providers[i].lookup):vm.otherProviders.push(providers[i].source)}function update(){var info={};vm.displayname!==user.get("displayname")&&(info.displayname=vm.displayname),vm.email!==user.get("email")&&(info.email=vm.email),0!==Object.keys(info).length&&(vm.dataLoading=!0,vm.success="",vm.error="",user.update(info)["catch"](function(errs){vm.error=errs.join(",")})["finally"](function(){vm.dataLoading=!1,vm.success="Changes saved"}))}var vm=this;vm.dataLoading=!1,vm.success="",vm.error="",vm.email="",vm.displayname="",vm.username="",vm.password="",vm.hasLocal=!1,vm.otherProviders=[],vm.reset=reset,vm.update=update,vm.reset()}var moduleName="commonUser";window.registerModule(moduleName).controller("profileController",ProfileController)}(),function(){"use strict";function SigninController($location,$timeout,user){function signin(){vm.dataLoading=!0,vm.error="",user.signin(vm.username,vm.password).then(function(){$location.path("/")})["catch"](function(err){vm.error=err})["finally"](function(){vm.dataLoading=!1})}var vm=this;vm.dataLoading=!1,vm.error="",vm.username="",vm.password="",vm.signin=signin}var moduleName="commonUser";window.registerModule(moduleName).controller("signinController",SigninController)}(),function(){"use strict";function SignupController($http,$location,user){function signup(){vm.dataLoading=!0,vm.errors=[],user.signup({username:vm.username,email:vm.email,password:vm.password}).then(function(){$location.path("/")})["catch"](function(err){err.data._type?vm.errors=Object.keys(err.data.errors).map(function(key){return err.data.errors[key]}):vm.errors.push(err.data)})["finally"](function(){vm.dataLoading=!1})}var vm=this;vm.errors=[],vm.signup=signup,vm.credentials={username:"",email:"",password:""}}var moduleName="commonUser";window.registerModule(moduleName).controller("signupController",SignupController)}(),function(){"use strict";describe("makeStyleSheet",function(){var makeStyleSheet,added;beforeEach(function(){added=null}),afterEach(function(done){added&&document.head.removeChild(added),setTimeout(done)}),beforeEach(module("makeStyleSheetModule")),beforeEach(inject(function(_makeStyleSheet_){makeStyleSheet=_makeStyleSheet_})),it("should add a style sheet",function(){var before=document.styleSheets.length;added=makeStyleSheet("foo",[]),expect(document.styleSheets.length).toBe(before+1)}),it("should add a rule",function(){added=makeStyleSheet("bar",[{_selector:".bar",position:"fixed"}]),expect(document.styleSheets[0].cssRules[0].cssText).toBe(".bar { position: fixed; }")})})}(),function(){"use strict";function hasCSS(cssTitle){for(var i=0;i<document.styleSheets.length;i++)if(document.styleSheets[i].title===cssTitle)return document.styleSheets[i];return null}function createStyleSheet(cssTitle){var style=document.createElement("style");return style.type="text/css",style.title=cssTitle,0===document.head.childNodes.length?document.head.appendChild(style):document.head.insertBefore(style,document.head.childNodes[0]),style}function addCSS(styleObj,rules){var i;if(styleObj.sheet.addRule)for(i=0;i<rules.length;i++)styleObj.sheet.addRule(rules[i]._selector,obj2str(rules[i]));else if(styleObj.sheet.insertRule)for(i=0;i<rules.length;i++)styleObj.sheet.insertRule(rules[i]._selector+" { "+obj2str(rules[i])+" }",0);else console.error("No addRule method...")}function obj2str(rule){var i,keys=Object.keys(rule),arr=[];for(i=0;i<keys.length;i++)"_selector"!==keys[i]&&arr.push(keys[i]+" : "+rule[keys[i]]+";");return arr.join(" ")}window.registerModule("makeStyleSheetModule").constant("makeStyleSheet",function(title,rules){var cssTitle=title+"StyleSheet",style=hasCSS(cssTitle);return style?style:(style=createStyleSheet(cssTitle),addCSS(style,rules),style)})}();